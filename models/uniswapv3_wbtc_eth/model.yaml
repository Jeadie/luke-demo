family: btc_eth 
type: autogluon
name: Uniswap V3 WBTC/ETH

training:
  sql: | 
    SELECT
      block_timestamp as ts,
      CASE 
          WHEN abs(cast(amount0 as double) * POWER(10, 8)) = 0 THEN NULL
          ELSE abs(cast(amount1 as double)/ POWER(10, 18) / NULLIF(abs(cast(amount0 as double)/ POWER(10, 8)), 0))
      END as y
    FROM eth.uniswap_v3.event_swaps
    WHERE address = '0x4585fe77225b41b697c938b018e2ac67ac5a20c0'
    ORDER BY block_number desc
inferencing:
  sql: |
    SELECT
      block_timestamp as ts,
      CASE 
          WHEN abs(cast(amount0 as double) * POWER(10, 8)) = 0 THEN NULL
          ELSE abs(cast(amount1 as double)/ POWER(10, 18) / NULLIF(abs(cast(amount0 as double)/ POWER(10, 8)), 0))
      END as y
    FROM eth.uniswap_v3.event_swaps
    WHERE address = '0x4585fe77225b41b697c938b018e2ac67ac5a20c0'
    ORDER BY block_number desc
    LIMIT 30
  lookback_size: 30
  forecast_size: 1
epochs: 3
normalizing:
  entry_point: 'normalize:noop'
metadata:
  firecache: false
  covariate: false
